---
title: "Ingest Events"
description: "Send tracking events to Outlit"
api: "POST /api/i/v1/{publicKey}/events"
---

## Endpoint

```
POST https://app.outlit.ai/api/i/v1/{publicKey}/events
```

## Path Parameters

<ParamField path="publicKey" type="string" required>
  Your organization's public key. Starts with `pk_`.
</ParamField>

## Request Body

```json
{
  "publicKey": "pk_your_public_key",
  "visitorId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "source": "pixel",
  "events": [
    {
      "type": "pageview",
      "url": "https://example.com/pricing",
      "path": "/pricing",
      "title": "Pricing - Example",
      "referrer": "https://google.com",
      "timestamp": 1699999999999
    }
  ]
}
```

### Body Parameters

<ParamField body="publicKey" type="string" required>
  Your public key (must match URL path).
</ParamField>

<ParamField body="visitorId" type="string" required>
  Unique identifier for the visitor. For browser tracking, this is auto-generated. For server-side, use a consistent ID or derive from email/userId.
</ParamField>

<ParamField body="source" type="string" default="pixel">
  Event source. One of: `pixel` (browser), `server`, `integration`.
</ParamField>

<ParamField body="events" type="array" required>
  Array of event objects to ingest (max 100 per request).
</ParamField>

## Event Types

### Pageview Event

Track a page view.

```json
{
  "type": "pageview",
  "url": "https://example.com/pricing?plan=pro",
  "path": "/pricing",
  "title": "Pricing - Example",
  "referrer": "https://google.com/search?q=example",
  "utmSource": "google",
  "utmMedium": "cpc",
  "utmCampaign": "spring_2024",
  "utmTerm": "pricing software",
  "utmContent": "header_cta",
  "timestamp": 1699999999999
}
```

<ParamField body="type" type="string" required>
  Must be `"pageview"`.
</ParamField>

<ParamField body="url" type="string" required>
  Full page URL.
</ParamField>

<ParamField body="path" type="string" required>
  URL path (e.g., `/pricing`).
</ParamField>

<ParamField body="title" type="string">
  Page title.
</ParamField>

<ParamField body="referrer" type="string">
  Referrer URL.
</ParamField>

<ParamField body="utmSource" type="string">
  UTM source parameter.
</ParamField>

<ParamField body="utmMedium" type="string">
  UTM medium parameter.
</ParamField>

<ParamField body="utmCampaign" type="string">
  UTM campaign parameter.
</ParamField>

<ParamField body="utmTerm" type="string">
  UTM term parameter.
</ParamField>

<ParamField body="utmContent" type="string">
  UTM content parameter.
</ParamField>

<ParamField body="timestamp" type="number">
  Unix timestamp in milliseconds. Defaults to server time.
</ParamField>

---

### Custom Event

Track any custom event.

```json
{
  "type": "custom",
  "eventName": "button_clicked",
  "properties": {
    "buttonId": "cta-hero",
    "page": "/pricing",
    "variant": "A"
  },
  "timestamp": 1699999999999
}
```

<ParamField body="type" type="string" required>
  Must be `"custom"`.
</ParamField>

<ParamField body="eventName" type="string" required>
  Name of the custom event.
</ParamField>

<ParamField body="properties" type="object">
  Key-value pairs of event properties.
</ParamField>

<ParamField body="timestamp" type="number">
  Unix timestamp in milliseconds.
</ParamField>

---

### Form Event

Track a form submission.

```json
{
  "type": "form",
  "formId": "contact-form",
  "formFields": {
    "email": "jane@example.com",
    "name": "Jane Doe",
    "company": "Acme Inc",
    "message": "I'd like to learn more..."
  },
  "timestamp": 1699999999999
}
```

<ParamField body="type" type="string" required>
  Must be `"form"`.
</ParamField>

<ParamField body="formId" type="string" required>
  Identifier for the form (ID attribute or name).
</ParamField>

<ParamField body="formFields" type="object" required>
  Key-value pairs of form field values.
</ParamField>

<ParamField body="timestamp" type="number">
  Unix timestamp in milliseconds.
</ParamField>

<Warning>
  Sensitive fields (password, credit_card, ssn, etc.) are automatically stripped on the server. Don't send them.
</Warning>

---

### Identify Event

Identify the visitor with their email/userId.

```json
{
  "type": "identify",
  "email": "jane@example.com",
  "userId": "usr_12345",
  "traits": {
    "name": "Jane Doe",
    "company": "Acme Inc",
    "plan": "enterprise",
    "role": "admin"
  },
  "timestamp": 1699999999999
}
```

<ParamField body="type" type="string" required>
  Must be `"identify"`.
</ParamField>

<ParamField body="email" type="string">
  User's email address. At least one of `email` or `userId` required.
</ParamField>

<ParamField body="userId" type="string">
  Your internal user ID.
</ParamField>

<ParamField body="traits" type="object">
  Properties to set on the user profile.
</ParamField>

<ParamField body="timestamp" type="number">
  Unix timestamp in milliseconds.
</ParamField>

## Response

### Success Response

```json
{
  "success": true,
  "processed": 3,
  "errors": []
}
```

<ResponseField name="success" type="boolean">
  Whether the request was successful.
</ResponseField>

<ResponseField name="processed" type="number">
  Number of events successfully processed.
</ResponseField>

<ResponseField name="errors" type="array">
  Array of processing errors (if any).
</ResponseField>

### Error Response

```json
{
  "success": false,
  "message": "Invalid payload",
  "errors": [
    {
      "path": ["events", 0, "type"],
      "message": "Invalid enum value"
    }
  ]
}
```

## Examples

### cURL

```bash
curl -X POST "https://app.outlit.ai/api/i/v1/pk_your_key/events" \
  -H "Content-Type: application/json" \
  -d '{
    "publicKey": "pk_your_key",
    "visitorId": "test-visitor-123",
    "source": "server",
    "events": [
      {
        "type": "custom",
        "eventName": "api_test",
        "properties": { "test": true }
      }
    ]
  }'
```

### JavaScript (fetch)

```javascript
const response = await fetch(
  'https://app.outlit.ai/api/i/v1/pk_your_key/events',
  {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      publicKey: 'pk_your_key',
      visitorId: 'visitor-123',
      source: 'pixel',
      events: [
        {
          type: 'pageview',
          url: window.location.href,
          path: window.location.pathname,
          title: document.title,
          timestamp: Date.now()
        }
      ]
    })
  }
)

const result = await response.json()
console.log(result)
```

### Python

```python
import requests
import time

response = requests.post(
    'https://app.outlit.ai/api/i/v1/pk_your_key/events',
    json={
        'publicKey': 'pk_your_key',
        'visitorId': 'python-visitor-123',
        'source': 'server',
        'events': [
            {
                'type': 'custom',
                'eventName': 'python_event',
                'properties': {'sdk': 'python'},
                'timestamp': int(time.time() * 1000)
            }
        ]
    }
)

print(response.json())
```

## Batching Best Practices

For high-volume tracking:

1. **Batch events** - Send multiple events per request (up to 100)
2. **Use background queue** - Don't block user actions
3. **Retry with backoff** - Handle temporary failures
4. **Flush on shutdown** - Send remaining events before exit

```javascript
// Example batching implementation
const eventQueue = []
const FLUSH_INTERVAL = 5000
const MAX_BATCH_SIZE = 100

function track(event) {
  eventQueue.push({ ...event, timestamp: Date.now() })
  
  if (eventQueue.length >= MAX_BATCH_SIZE) {
    flush()
  }
}

async function flush() {
  if (eventQueue.length === 0) return
  
  const events = eventQueue.splice(0, MAX_BATCH_SIZE)
  
  try {
    await fetch('/api/i/v1/pk_xxx/events', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        publicKey: 'pk_xxx',
        visitorId: getVisitorId(),
        source: 'pixel',
        events
      })
    })
  } catch (error) {
    // Re-queue failed events
    eventQueue.unshift(...events)
  }
}

setInterval(flush, FLUSH_INTERVAL)
window.addEventListener('beforeunload', flush)
```

